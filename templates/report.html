<!DOCTYPE html>
<html>
<head>
<title>Rubber Load Test Report</title>
<style>
body { font-family: Arial; background:#0f172a; color:#e5e7eb; padding:20px; }
h1,h2 { color:#38bdf8 }
.card { background:#020617; padding:15px; margin-bottom:15px; border-radius:8px; }
table { width:100%; border-collapse:collapse; }
th,td { padding:8px; border-bottom:1px solid #334155; }
.bad { color:#f87171 }
.good { color:#4ade80 }
</style>
</head>
<body>

<h1>Website Load Test Report</h1>

<div class="card">
<h2>Summary</h2>
<ul>
<li>Total Requests: {{ stats.total }}</li>
<li>Errors: {{ stats.errors }}</li>
<li>Error Rate: {{ stats.error_rate }}%</li>
<li>Avg Response: {{ stats.avg }}s</li>
<li>P95: {{ stats.p95 }}s</li>
<li>CPU Avg: {{ stats.cpu_avg }}%</li>
<li>Memory Avg: {{ stats.mem_avg }}%</li>
</ul>
</div>

<div class="card">
<h2>Latency Chart</h2>
<img src="../charts/latency.png" width="100%">
</div>

<div class="card">
<h2>Screenshots</h2>
<img src="../screenshots/before_test.png" width="45%">
<img src="../screenshots/after_test.png" width="45%">
</div>

<div class="card">
<h2>Requests</h2>
<table>
<tr>
<th>Time</th>
<th>URL</th>
<th>Status</th>
<th>Latency</th>
<th>Error</th>
</tr>
{% for r in results %}
<tr>
<td>{{ r.ts }}</td>
<td>{{ r.url }}</td>
<td class="{{ 'bad' if r.error else 'good' }}">{{ r.status or r.error }}</td>
<td>{{ "%.3f"|format(r.time) }}s</td>
<td>{{ r.error or '' }}</td>
</tr>
{% endfor %}
</table>
</div>

</body>
</html>
